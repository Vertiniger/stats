<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSTAT</title>
    
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">

</head>
<body>

    <!-- Menu -->
    <div class="hamburger-menu">
        <input id="menu-toggle" type="checkbox"/>
        <label class="menu-btn" for="menu-toggle">
            <span></span>
        </label>
        <ul class="menu-box">
            <a class="menu-item fas fa-home" href="#"> Home</a>
        </ul>
    </div>

    <!-- Content -->
    <center>
        <div style="background: #06122f; width: 90%; margin: 20px; border-radius: 15px" id="menu-l7">
            <h2 style="color: white">Live Layer 7 DSTAT</h2>
            <h3><span id="attack-address"></span></h3>
            <p><button type="button" class="green-btn" onclick="copyAddress()">Copy</button></p>
            <div id="graph" style="border-radius: 15px"></div>
        </div>

        <div style="background: #06122f; width: 90%; margin: 20px; border-radius: 15px" id="stats">
            <h2 style="color: white">History</h2> 
            <p>Max RPS: <span id="max_requests"></span></p>
            <p>RPS/Days: <span id="total_day_requests"></span></p>
        </div>
    </center>

    <!-- JavaScript -->
    <script>
        document.getElementById('attack-address').innerHTML = window.location.href + 'attack/';
        
        function copyAddress() {
            var tempInput = document.createElement('input');
            tempInput.style = 'position: absolute; left: -1000px; top: -1000px';
            tempInput.value = document.getElementById('attack-address').innerHTML;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
        }
    </script>

    <!-- Load JavaScript Files (Pastikan sudah dipindahkan ke /public/js/) -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/highcharts.js"></script>
    <script src="/js/requests.js"></script>

    <!-- Caching untuk PWA -->
    <script>
        if ('caches' in window) {
            caches.open('static-cache-v1').then(cache => {
                const urlsToCache = [
                    '/',
                    '/index.html',
                    'https://unpkg.com/aos@2.3.1/dist/aos.css',
                    'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css',
                    'https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap',
                    'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css',
                    'https://unpkg.com/aos@2.3.1/dist/aos.js',
                    'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js',
                    'https://illustrations.popsy.co/white/hacker.svg'
                ];
                return cache.addAll(urlsToCache);
            });
        }
    </script>

</body>
</html>
